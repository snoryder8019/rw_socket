
  
  <!-- Include CKEditor script from CDN -->
  <script src="https://cdn.ckeditor.com/4.16.0/standard/ckeditor.js"></script>
  
  <script>
    // Function to initialize CKEditor on specified textareas
    function initializeCKEditor() {
      const wysiwygFields = document.querySelectorAll('.wysiwyg');
      wysiwygFields.forEach(field => {
        if (!field.hasAttribute('data-ckeditor-initialized')) {
          CKEDITOR.replace(field.id);
          field.setAttribute('data-ckeditor-initialized', 'true'); // Mark as initialized to prevent duplicate setups
        }
      });
    }

    document.addEventListener('DOMContentLoaded', function() {
      // Initialize CKEditor on page load
      initializeCKEditor();

      // Get the blog form element
      const blogForm = document.getElementById('blogForm');

      if (blogForm) {
        // Create an observer instance linked to the callback function
        const observer = new MutationObserver((mutations) => {
            console.log(`observered blogs`)
          mutations.forEach((mutation) => {
            if (mutation.addedNodes.length > 0) {
              // Reinitialize CKEditor for any new textareas added
              initializeCKEditor();
            }
          });
        });

        // Start observing the blog form for changes in its child list
        observer.observe(blogForm, {
          childList: true,  // Listen for addition or removal of children
          subtree: true    // Include changes to all descendants
        });
      }
    });
  </script>
</body>
</html>
