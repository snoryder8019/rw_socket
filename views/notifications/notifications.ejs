<div id="notifications">
  <h3>  Your Notifications:</h3>
<div id="notificationsSection"></div>


<h3>Community Updates</h3>
<div class="userStats">
  <div class="statContainer">              
    <div class="statTitle">Last Chance to Vote</div>
  <div class="stat">Travel Destination</div>
</div>
  <div class="statContainer">              
    <div class="statTitle">Bingo Nights</div>
  <div class="stat">Every Tuesday at 8pm EST</div>
</div>
</div>

            <h3>Recent Stats</h3>
            <div class="userStats">
              <div class="statContainer">              
                <div class="statTitle">Comments last 7 days</div>
              <div class="stat">34</div>
            </div>
              <div class="statContainer">              
                <div class="statTitle">Games last 7 days</div>
              <div class="stat">34</div>
            </div>
              <div class="statContainer">              
                <div class="statTitle">Dominoes record</div>
              <div class="stat">W (4) - L (14)</div>
            </div>
              <div class="statContainer">              
                <div class="statTitle">Bingo record</div>
              <div class="stat">W (2) - L (8)</div>
            </div>

            </div>



</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        fetch('/getNotifications')
          .then(response => response.json())
          .then(data => {
            // Process the data and convert to HTML
            const notificationsContainer = document.querySelector('#notificationsSection');
            notificationsContainer.innerHTML = ''; // Clear existing notifications (if any)
            data.forEach(notification => {
              const notificationElement = document.createElement('div');
              notificationElement.className = 'notification';

              notificationElement.innerHTML = `
                <img src="${notification.imgUrl}" alt="">
                <h3>${notification.title}</h3>
                <h4><a href="${notification.link}">...see more</a></h4>
              `;
              notificationsContainer.appendChild(notificationElement);
            });
          })
          .catch(error => console.error('Error fetching notifications:', error));
        // Optional: Unobserve after the first fetch
        observer.unobserve(document.querySelector('#notifications'));
      }
    });
  }, { threshold: 0.1 });

  const notifications = document.querySelector('#notifications');
  if (notifications) {
    observer.observe(notifications);
  }
});
</script>
