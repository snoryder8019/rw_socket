<!DOCTYPE html>

<head> 
  <link rel="stylesheet" href="/stylesheets/style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title><%=config.title%></title>
  
  <!---->
  <!---->
  <!---->
</head>

<body>      
  
  <!--ALL FIXED PARTIALS OUTSIDE THE MAIN DIV-->
  <div id="flashErrors"><%- include('./partials/flashErrors',{message:message})%></div>  
  
  <div id="main">
    <div id="mainBanner" class="banner">

        <div id="bannerControls">
          <%if(typeof user ==='object'&& user){%>
              <button id="dashToggle">D</button>
              <button id="chatToggle">C</button>
          <%}else{%>
              <button id="dashToggle">Sign In</button>
            <%}%>
        </div>



   



    </div>
 

    <%if(typeof user === 'object' && user){%>

      <%-include('./authTrueTemplates/template')%>
      <%}else{%>
        <%-include('./authFalseTemplates/template')%>
    <%}%>
    
    <!----MENU IS CONSTANT FOOTER-->
    
    
  </div>    


  <%if(typeof user === 'object' && user){%>
  <%- include('./chat/basicChat',{user:user})%>
          <%- include('./userDash/userDash',{user:user})%>
          <%}else{%>
            <%- include('./chat/basicChat',{user:""})%>
            <%- include('./userDash/userDash',{user:""})%>
            <%}%>
            <div id="footer"><%- include('./partials/footer')%></div>      
          
            <script>

window.addEventListener('scroll', function() {
  var banner = document.getElementById('mainBanner');
  var bannerControls = document.getElementById('bannerControls');
  var bannerHeight = banner.offsetHeight;
  
  if (window.pageYOffset > bannerHeight) {
    banner.classList.add('sticky');
    banner.classList.add('shrunk');
  } else {
    banner.classList.remove('sticky');
    banner.classList.remove('shrunk');
  }
});
document.addEventListener('DOMContentLoaded', () => {




  document.querySelectorAll('.auth_view_true').forEach(div => {
    div.addEventListener('click', function() {
      if (!this.classList.contains('expanded')) {
        this.classList.add('expanded');
        let closeButton = this.querySelector('.close-button');
        if (!closeButton) {
          closeButton = document.createElement('button');
          closeButton.textContent = 'X';
          closeButton.className = 'close-button';
          this.appendChild(closeButton);
        }
        closeButton.style.display = 'block'; // Ensure the close button is visible

        closeButton.addEventListener('click', function(e) {
          e.stopPropagation(); // Prevent click from propagating to the div
          this.parentNode.classList.remove('expanded');
          this.style.display = 'none'; // Hide button after collapsing
        });
      }
    });
  });
});

          </script>  
          <script src="/javascripts/loader.js"></script>
          
        </body>
        
        </html>
        
        
        
        
        
        
        
        